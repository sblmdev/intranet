<div class="container mx-auto w-full h-full bg-white px-4 pt-4 pb-8">
    <div class="flex items-center">
        <div class="font-montserrat text-2xl font-bold">Recomendaciones</div>
        <button
            class="ml-auto rounded-3xl my-4 bg-green-400 text-white font-bold py-2 px-8 flex items-center"
            (click)="openGrafico()">
            <svg xmlns="http://www.w3.org/2000/svg" height="16" width="14"
                viewBox="0 0 448 512">
                <path
                    d="M160 80c0-26.5 21.5-48 48-48h32c26.5 0 48 21.5 48 48V432c0 26.5-21.5 48-48 48H208c-26.5 0-48-21.5-48-48V80zM0 272c0-26.5 21.5-48 48-48H80c26.5 0 48 21.5 48 48V432c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V272zM368 96h32c26.5 0 48 21.5 48 48V432c0 26.5-21.5 48-48 48H368c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48z" />
            </svg>
            <span class="ml-2">Abrir Gr치ficos</span>
        </button>

        <button
            class="ml-2 rounded-3xl my-4 bg-indigo-800 text-white font-bold py-2 px-8 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-green-300"
            (click)="toggleNuevo()">
            Nueva Recomendaci칩n
        </button>
    </div>

    <table class="w-full table-auto font-montserrat border mt-4">
        <thead class="bg-indigo-800">
            <tr class="text-white">
                <th width="5%" class="text-center">#</th>
                <th class="text-left">Observaci칩n</th>
                <th width="5%" class="text-center">Riesgo</th>
                <th width="15%" class="text-center">Unidad Responsable</th>
                <th width="22%" class="text-center">Responsable</th>
                <th width="8%" class="text-center">Fecha final</th>
                <th width="8%" class="text-center">Acciones</th>
            </tr>
        </thead>
        <tbody>
            <tr class="text-sm"
                *ngFor="let item of recomendations | paginate: { itemsPerPage: 6, currentPage: p }; let i = index"
                class="odd:bg-white even:bg-blue-50">
                <td width="5%" class="text-center">{{item.numero}}</td>
                <td class="text-left">{{item.observacion}}</td>
                <td class="text-center align-middle" [ngSwitch]="item.nivelRiesgo">
                    <ng-container *ngSwitchCase="1"><span
                            class="bg-green-400 px-4 py-2 text-white font-bold font-montserrat">BAJO</span></ng-container>
                    <ng-container *ngSwitchCase="2"><span
                            class="bg-amber-300 px-2.5 py-2 text-white font-bold font-montserrat">MEDIO</span></ng-container>
                    <ng-container *ngSwitchCase="3"><span
                            class="bg-red-600 px-4 py-2 text-white font-bold font-montserrat">ALTO</span></ng-container>
                </td>
                <td class="text-center">{{item.unidadResponsable}}</td>
                <td class="text-center" [innerHTML]="item.nombresResponsable.split('/').join('<br>')"></td>
                <td class="text-center">{{item.fechaFinal.substring(8,10) }}-{{item.fechaFinal.substring(5,7)
                    }}-{{item.fechaFinal.substring(0,4) }}</td>
                <td class="text-center">
                    <button class="px-2 py-2 bg-red-300 ml-2" title="Eliminar Plan de acci칩n"
                        (click)="deleteRecomendation(item.id)">
                        <svg xmlns="http://www.w3.org/2000/svg" height="16" width="14" viewBox="0 0 448 512">
                            <path
                                d="M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z" />
                        </svg>
                    </button>
                </td>
            </tr>
        </tbody>
    </table>
    <div class="flex justify-center font-bold mt-6 font-montserrat ">
        <pagination-controls class="my-pagination" (pageChange)="p = $event" previousLabel="Anterior"
            nextLabel="Siguiente">
        </pagination-controls>
    </div>
</div>

<div *ngIf="graficos" class="modal fixed inset-0 flex items-center justify-center z-10">
    <div class="fixed left-0 top-0 bg-black bg-opacity-60 w-full h-full select-none justify-center items-center flex">
        <div class="modal-container font-montserrat bg-white w-3/5 h-auto p-4 rounded-xl shadow-lg ">
            <!-- pointer-events-auto overflow-auto -->
            <div class="flex ">
                <button
                    class="ml-auto bg-red-500 text-white rounded-md py-1 px-3 font-bold hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-300"
                    (click)="closeGrafico()">X</button>
            </div>


            <div class="mx-8 mb-4">
                <div class="flex mb-8">
                    <div class="w-full grid grid-cols-2">
                        <canvasjs-chart [options]="chartOptions" [styles]="{width: '100%', height:'300px'}"></canvasjs-chart>
                        <canvasjs-chart [options]="chartOptions2" [styles]="{width: '100%', height:'300px'}"></canvasjs-chart>
                        <canvasjs-chart [options]="chartOptions3" [styles]="{width: '100%', height:'300px'}"></canvasjs-chart>
                        <canvasjs-chart [options]="chartOptions4" [styles]="{width: '100%', height:'300px'}"></canvasjs-chart>
                    </div>  
                </div>

            </div>
        </div>
    </div>
</div>